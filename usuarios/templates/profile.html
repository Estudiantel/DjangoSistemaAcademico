{% extends 'base.html' %}

{% block title %}Mi Perfil | Sistema Académico{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-12 col-lg-10 col-xl-8">
    <div class="card shadow-sm mb-4">
      <div class="card-body">
        <h2 class="h4 card-title mb-1">Mi Perfil</h2>
        <p class="text-muted mb-4">Información de Usuario</p>

        <div class="mb-3">
          <p class="fw-bold mb-1">Correo electrónico:</p>
          <p class="mb-0">{{ correo }}</p>
        </div>
        <div class="mb-3">
          <p class="fw-bold mb-1">Nombre Completo:</p>
          <p class="mb-0">{{ nombre_completo }}</p>
        </div>
        <div class="mb-4">
          <p class="fw-bold mb-1">DNI:</p>
          <p class="mb-0">{{ dni }}</p>
        </div>

        <div class="row pt-2 border-top">
          <div class="col-12 col-md-6 mb-2 mb-md-0">
            <span class="fw-bold">Miembro desde:</span>
            <span>{{ user.date_joined|date:'d/m/Y H:i' }}</span>
          </div>
          <div class="col-12 col-md-6 text-md-end">
            <span class="fw-bold">Último Acceso:</span>
            <span>{{ user.last_login|date:'d/m/Y H:i'|default:'Sin registros' }}</span>
          </div>
        </div>
      </div>
    </div>

    <div class="card shadow-sm mb-4">
      <div class="card-body">
        {% if user.rol == 'ALUMNO' and alumno %}
          <h3 class="h5 card-title mb-3">Información Académica</h3>
          <p class="fw-bold mb-1">Carrera:</p>
          <p class="mb-0">{{ alumno.carrera.nombre|default:'Sin carrera asignada' }}</p>
        {% elif es_administrador %}
          <h3 class="h5 card-title mb-1">Panel de Administración</h3>
          <p class="text-muted mb-3">Accesos Rápidos</p>
          <div class="d-flex flex-wrap gap-2">
            <a href="{% url 'usuarios:alumno-list' %}" class="btn btn-primary">Gestión de Estudiantes</a>
            <a href="{% url 'usuarios:materia-list' %}" class="btn btn-outline-primary">Gestión de Materias</a>
            <a href="/admin/" class="btn btn-dark">Django Admin</a>
          </div>
        {% endif %}
      </div>
    </div>

    <div class="card shadow-sm">
      <div class="card-body">
        <h3 class="h5 card-title mb-3"><i class="bi bi-gear-fill me-2"></i>Acciones</h3>
        <div class="d-flex flex-wrap gap-2">
          <a href="{% url 'password_change' %}" class="btn btn-warning">Cambiar Contraseña</a>
          <a href="{% url 'home' %}" class="btn btn-secondary">Volver al Inicio</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
